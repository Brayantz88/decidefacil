<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>DecideFÃ¡cil</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:linear-gradient(135deg,#1e1e2f,#2b2b4f);color:#fff}
header{display:flex;justify-content:space-between;align-items:center;padding:10px 15px}
.btn{background:#4f7cff;border:none;color:#fff;padding:10px 14px;border-radius:10px;cursor:pointer}
.small{font-size:13px;padding:6px 10px}
.hidden{display:none}
main{text-align:center;padding:40px 15px}
h1{font-size:36px;margin-bottom:5px}
.sub{opacity:.8}
.actions{margin-top:30px}
.chatBox{display:none;flex-direction:column;height:100vh}
.messages{flex:1;overflow:auto;padding:10px}
.msg{margin:8px 0;padding:10px;border-radius:10px;max-width:80%}
.user{background:#4f7cff;margin-left:auto}
.ai{background:#333}
.inputBar{display:flex;padding:10px;gap:5px}
input{flex:1;padding:10px;border-radius:8px;border:none}
.panel{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center}
.card{background:#222;padding:20px;border-radius:15px;width:90%;max-width:400px}
.langBtn{display:flex;align-items:center;gap:8px;margin:5px 0}
.progress{height:10px;background:#333;border-radius:10px;overflow:hidden}
.bar{height:100%;width:0;background:#4f7cff}
</style>
</head>

<body>

<header>
  <button class="btn small" onclick="openLogin()">ğŸ‘¤ <span id="userName">Invitado</span></button>
  <button class="btn small" onclick="openSettings()">âš™ï¸</button>
</header>

<main id="home">
  <h1 id="t_title">DecideFÃ¡cil</h1>
  <div class="sub" id="t_sub">Decide sin pensar demasiado</div>

  <div class="actions">
    <button class="btn" onclick="openChat('ask')" id="t_ask">Pregunta a la IA</button><br><br>
    <button class="btn" onclick="openChat('decide')" id="t_decide">Decide por mÃ­</button><br><br>
    <button class="btn small" onclick="openPremium()">â­ Premium</button><br><br>
    <button class="btn small">ğŸ¬ Anuncios</button>
  </div>
</main>

<!-- CHAT -->
<div id="chat" class="chatBox">
  <header>
    <button class="btn small" onclick="back()">âŒ</button>
    <div id="chatTitle"></div>
  </header>
  <div class="messages" id="messages"></div>
  <div class="inputBar">
    <input id="input" placeholder="Escribe...">
    <button class="btn" onclick="send()">â¤</button>
  </div>
</div>

<!-- LOGIN -->
<div id="login" class="panel hidden">
  <div class="card">
    <h3>Iniciar sesiÃ³n</h3>
    <input id="loginName" placeholder="Nombre"><br><br>
    <input id="loginEmail" placeholder="Email Google"><br><br>
    <button class="btn" onclick="saveUser()">Guardar</button>
  </div>
</div>

<!-- SETTINGS -->
<div id="settings" class="panel hidden">
  <div class="card">
    <h3>Cambiar idioma</h3>
    <div class="langBtn" onclick="setLang('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</div>
    <div class="langBtn" onclick="setLang('en')">ğŸ‡ºğŸ‡¸ English</div>
    <div class="langBtn" onclick="setLang('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</div>
    <div class="langBtn" onclick="setLang('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
    <div class="langBtn" onclick="setLang('ja')">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</div>
    <br>
    <button class="btn small" onclick="closeSettings()">Cerrar</button>
  </div>
</div>

<!-- PREMIUM -->
<div id="premium" class="panel hidden">
  <div class="card">
    <h3 id="t_premium">Beneficios Premium</h3>
    <ul id="t_premium_list">
      <li>Respuestas ilimitadas</li>
      <li>Sin anuncios</li>
      <li>Prioridad IA</li>
    </ul>
    <div class="progress"><div class="bar" style="width:40%"></div></div><br>
    <button class="btn small">Ver anuncios</button><br><br>
    <button class="btn small" onclick="closePremium()">Cerrar</button>
  </div>
</div>

<script>
let lang="es"
let currentChat=null
let user=JSON.parse(localStorage.getItem("df_user"))||{name:"Invitado",email:null}
let chats=JSON.parse(localStorage.getItem("df_chats"))||{}

document.getElementById("userName").innerText=user.name

const T={
es:{title:"DecideFÃ¡cil",sub:"Decide sin pensar demasiado",ask:"Pregunta a la IA",decide:"Decide por mÃ­",premium:"Beneficios Premium"},
en:{title:"DecideEasy",sub:"Decide easily",ask:"Ask AI",decide:"Decide for me",premium:"Premium benefits"},
fr:{title:"DÃ©cideFacile",sub:"DÃ©cidez facilement",ask:"Demander Ã  l'IA",decide:"DÃ©cide pour moi",premium:"Avantages Premium"},
ar:{title:"Ù‚Ø±Ø± Ø¨Ø³Ù‡ÙˆÙ„Ø©",sub:"Ø§ØªØ®Ø° Ø§Ù„Ù‚Ø±Ø§Ø± Ø¨Ø³Ù‡ÙˆÙ„Ø©",ask:"Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",decide:"Ù‚Ø±Ø± Ø¹Ù†ÙŠ",premium:"Ù…Ø²Ø§ÙŠØ§ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…"},
ja:{title:"ãƒ‡ã‚£ã‚µã‚¤ãƒ‰ãƒ»ãƒ•ã‚¡ã‚·ãƒ«",sub:"ç°¡å˜ã«æ±ºã‚ã‚ˆã†",ask:"AIã«è³ªå•",decide:"AIã«ä»»ã›ã‚‹",premium:"ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰¹å…¸"}
}

function applyLang(){
  t("t_title",T[lang].title)
  t("t_sub",T[lang].sub)
  t("t_ask",T[lang].ask)
  t("t_decide",T[lang].decide)
  t("t_premium",T[lang].premium)
}
function t(id,txt){document.getElementById(id).innerText=txt}

function setLang(l){lang=l;applyLang();closeSettings()}
applyLang()

function openChat(type){
  currentChat=type
  home.style.display="none"
  chat.style.display="flex"
  chatTitle.innerText=T[lang][type]
  messages.innerHTML=""
  const key=user.email+"_"+type
  chats[key]=(chats[key]||[])
  chats[key].forEach(m=>addMsg(m.text,m.from))
}

function send(){
  const val=input.value
  if(!val)return
  addMsg(val,"user")
  const key=user.email+"_"+currentChat
  chats[key].push({text:val,from:"user"})
  setTimeout(()=>{
    addMsg("Respuesta IA","ai")
    chats[key].push({text:"Respuesta IA",from:"ai"})
    localStorage.setItem("df_chats",JSON.stringify(chats))
  },500)
  input.value=""
}

function addMsg(t,f){
  const d=document.createElement("div")
  d.className="msg "+f
  d.innerText=t
  messages.appendChild(d)
}

function back(){chat.style.display="none";home.style.display="block"}
function openLogin(){login.classList.remove("hidden")}
function saveUser(){
  user={name:loginName.value||"Usuario",email:loginEmail.value||"local"}
  localStorage.setItem("df_user",JSON.stringify(user))
  document.getElementById("userName").innerText=user.name
  login.classList.add("hidden")
}
function openSettings(){settings.classList.remove("hidden")}
function closeSettings(){settings.classList.add("hidden")}
function openPremium(){premium.classList.remove("hidden")}
function closePremium(){premium.classList.add("hidden")}
</script>

</body>
</html>
