<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>DecideFÃ¡cil</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:linear-gradient(135deg,#1f1f3a,#2e2e5f);color:#fff}
.hidden{display:none}
button{cursor:pointer;border:none;border-radius:12px}
header{display:flex;justify-content:space-between;align-items:center;padding:10px 15px}
.btn{background:#5a7cff;color:#fff;padding:10px 16px}
.small{font-size:13px;padding:6px 10px}
main{padding:40px 20px;text-align:center}
h1{font-size:38px;margin-bottom:8px}
.sub{opacity:.8;margin-bottom:30px}
.actions button{margin:10px 0;width:100%}
.screen{position:fixed;top:0;left:0;width:100%;height:100%;background:#14142b;display:none;flex-direction:column}
.chatHeader{display:flex;align-items:center;gap:10px;padding:10px}
.messages{flex:1;overflow:auto;padding:15px}
.msg{margin:8px 0;padding:10px 14px;border-radius:14px;max-width:80%}
.user{background:#5a7cff;margin-left:auto}
.ai{background:#333}
.inputBar{display:flex;gap:5px;padding:10px}
input{flex:1;padding:10px;border-radius:10px;border:none}
.panel{position:fixed;top:0;left:0;width:100%;height:100%;background:#000a;display:none;align-items:center;justify-content:center}
.card{background:#1f1f3a;padding:20px;border-radius:16px;width:90%;max-width:420px}
.lang{display:flex;align-items:center;gap:10px;padding:6px 0;cursor:pointer}
.progress{height:10px;background:#333;border-radius:10px;overflow:hidden}
.bar{height:100%;background:#5a7cff;width:0%}
</style>
</head>

<body>

<header>
  <button class="btn small" onclick="openLogin()">ğŸ‘¤ <span id="userLabel">Invitado</span></button>
  <button class="btn small" onclick="openSettings()">âš™ï¸</button>
</header>

<main id="home">
  <h1 id="t_title">DecideFÃ¡cil</h1>
  <div class="sub" id="t_sub">Decide sin pensar demasiado</div>

  <div class="actions">
    <button class="btn" onclick="openChat('ask')" id="t_ask">Pregunta a la IA</button>
    <button class="btn" onclick="openChat('decide')" id="t_decide">Decide por mÃ­</button>
    <button class="btn small" onclick="openPremium()">â­ Premium</button>
    <button class="btn small">ğŸ¬ Anuncios</button>
  </div>
</main>

<!-- CHAT -->
<div id="chat" class="screen">
  <div class="chatHeader">
    <button class="btn small" onclick="back()">âŒ</button>
    <strong id="chatTitle"></strong>
  </div>
  <div class="messages" id="messages"></div>
  <div class="inputBar">
    <input id="input" placeholder="Escribe aquÃ­â€¦">
    <button class="btn" onclick="send()">â¤</button>
  </div>
</div>

<!-- LOGIN -->
<div id="login" class="panel">
  <div class="card">
    <h3>Cuenta</h3>
    <input id="name" placeholder="Nombre"><br><br>
    <input id="email" placeholder="Email Google"><br><br>
    <button class="btn" onclick="saveUser()">Guardar</button>
  </div>
</div>

<!-- SETTINGS -->
<div id="settings" class="panel">
  <div class="card">
    <h3 id="t_lang">Cambiar idioma</h3>
    <div class="lang" onclick="setLang('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</div>
    <div class="lang" onclick="setLang('en')">ğŸ‡ºğŸ‡¸ English</div>
    <div class="lang" onclick="setLang('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</div>
    <div class="lang" onclick="setLang('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
    <div class="lang" onclick="setLang('ja')">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</div>
    <br>
    <button class="btn small" onclick="closeSettings()">Cerrar</button>
  </div>
</div>

<!-- PREMIUM -->
<div id="premium" class="panel">
  <div class="card">
    <h3 id="t_premium">Beneficios Premium</h3>
    <ul id="t_premium_list">
      <li id="p1">Uso ilimitado</li>
      <li id="p2">Sin anuncios</li>
      <li id="p3">IA prioritaria</li>
    </ul>
    <div class="progress"><div class="bar" id="bar" style="width:40%"></div></div><br>
    <button class="btn small">Ver anuncios</button><br><br>
    <button class="btn small" onclick="closePremium()">Cerrar</button>
  </div>
</div>

<script>
let lang=localStorage.getItem("lang")||"es"
let user=JSON.parse(localStorage.getItem("user"))||{name:"Invitado",email:"local"}
let chats=JSON.parse(localStorage.getItem("chats"))||{}
let drafts=JSON.parse(localStorage.getItem("drafts"))||{}
let currentChat=null

userLabel.innerText=user.name

const T={
es:{title:"DecideFÃ¡cil",sub:"Decide sin pensar demasiado",ask:"Pregunta a la IA",decide:"Decide por mÃ­",premium:"Beneficios Premium",p1:"Uso ilimitado",p2:"Sin anuncios",p3:"IA prioritaria"},
en:{title:"DecideEasy",sub:"Decide easily",ask:"Ask the AI",decide:"Decide for me",premium:"Premium benefits",p1:"Unlimited use",p2:"No ads",p3:"Priority AI"},
fr:{title:"DÃ©cideFacile",sub:"DÃ©cidez facilement",ask:"Demander Ã  lâ€™IA",decide:"DÃ©cide pour moi",premium:"Avantages Premium",p1:"Utilisation illimitÃ©e",p2:"Sans publicitÃ©",p3:"IA prioritaire"},
ar:{title:"Ù‚Ø±Ø± Ø¨Ø³Ù‡ÙˆÙ„Ø©",sub:"Ø§ØªØ®Ø° Ø§Ù„Ù‚Ø±Ø§Ø± Ø¨Ø³Ù‡ÙˆÙ„Ø©",ask:"Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",decide:"Ù‚Ø±Ø± Ø¹Ù†ÙŠ",premium:"Ù…Ø²Ø§ÙŠØ§ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…",p1:"Ø§Ø³ØªØ®Ø¯Ø§Ù… ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯",p2:"Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ù„Ø§Ù†Ø§Øª",p3:"Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù…ÙŠØ²"},
ja:{title:"ãƒ‡ã‚£ã‚µã‚¤ãƒ‰ãƒ»ãƒ•ã‚¡ã‚·ãƒ«",sub:"ç°¡å˜ã«æ±ºã‚ã‚ˆã†",ask:"AIã«è³ªå•ã™ã‚‹",decide:"AIã«ä»»ã›ã‚‹",premium:"ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰¹å…¸",p1:"ç„¡åˆ¶é™åˆ©ç”¨",p2:"åºƒå‘Šãªã—",p3:"å„ªå…ˆAI"}
}

function applyLang(){
  t("t_title","title");t("t_sub","sub");t("t_ask","ask");t("t_decide","decide")
  t("t_premium","premium");t("p1","p1");t("p2","p2");t("p3","p3")
}
function t(id,k){document.getElementById(id).innerText=T[lang][k]}
applyLang()

function setLang(l){lang=l;localStorage.setItem("lang",l);applyLang();closeSettings()}

function openChat(type){
  currentChat=type
  home.style.display="none"
  chat.style.display="flex"
  chatTitle.innerText=T[lang][type]
  messages.innerHTML=""
  const key=user.email+"_"+type
  chats[key]=chats[key]||[]
  chats[key].forEach(m=>addMsg(m.t,m.f))
  input.value=drafts[key]||""
}

function send(){
  if(!input.value)return
  const key=user.email+"_"+currentChat
  addMsg(input.value,"user")
  chats[key].push({t:input.value,f:"user"})
  drafts[key]=""
  setTimeout(()=>{
    addMsg("Respuesta IA","ai")
    chats[key].push({t:"Respuesta IA",f:"ai"})
    localStorage.setItem("chats",JSON.stringify(chats))
  },500)
  input.value=""
}

input.addEventListener("input",()=>{
  if(currentChat){
    drafts[user.email+"_"+currentChat]=input.value
    localStorage.setItem("drafts",JSON.stringify(drafts))
  }
})

function addMsg(t,f){
  const d=document.createElement("div")
  d.className="msg "+f
  d.innerText=t
  messages.appendChild(d)
}

function back(){chat.style.display="none";home.style.display="block"}
function openLogin(){login.style.display="flex"}
function saveUser(){
  user={name:name.value||"Usuario",email:email.value||"local"}
  localStorage.setItem("user",JSON.stringify(user))
  userLabel.innerText=user.name
  login.style.display="none"
}
function openSettings(){settings.style.display="flex"}
function closeSettings(){settings.style.display="none"}
function openPremium(){premium.style.display="flex"}
function closePremium(){premium.style.display="none"}
</script>

</body>
</html>
